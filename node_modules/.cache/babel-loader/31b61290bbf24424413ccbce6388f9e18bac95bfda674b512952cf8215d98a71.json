{"ast":null,"code":"var _jsxFileName = \"/Users/aniruddhakulkarni/Desktop/Kalvium/pdf-co-viewer/src/components/PdfViewer.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { Worker, Viewer } from \"@react-pdf-viewer/core\";\nimport { defaultLayoutPlugin } from \"@react-pdf-viewer/default-layout\";\nimport io from \"socket.io-client\";\nimport \"@react-pdf-viewer/core/lib/styles/index.css\";\nimport \"@react-pdf-viewer/default-layout/lib/styles/index.css\";\n\n// Connect to your backend URL\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst socket = io(\"http://localhost:5001\");\nconst PdfViewer = ({\n  pdfUrl\n}) => {\n  _s();\n  const [currentPage, setCurrentPage] = useState(1);\n\n  // Initialize the defaultLayoutPlugin inside the component body\n  const defaultLayout = defaultLayoutPlugin();\n\n  // Ref for the Viewer instance\n  const viewerRef = useRef(null);\n  useEffect(() => {\n    // Listen for page-change events from the server\n    socket.on(\"page-change\", newPage => {\n      setCurrentPage(newPage); // Update current page based on server event\n    });\n\n    // Clean up the event listener\n    return () => {\n      socket.off(\"page-change\");\n    };\n  }, []);\n  const handlePageChange = e => {\n    const newPage = parseInt(e.target.value, 10);\n    if (newPage >= 1) {\n      setCurrentPage(newPage); // Update the local page\n      socket.emit(\"change-page\", newPage); // Emit the event to the server\n    }\n  };\n  const handleDocumentLoad = () => {\n    // Jump to the current page when the document loads\n    if (viewerRef.current && currentPage >= 1) {\n      viewerRef.current.jumpToPage(currentPage - 1); // Use zero-based indexing\n    }\n  };\n  const handlePageRendered = e => {\n    // Ensure the viewer shows the correct page\n    if (e.currentPage + 1 !== currentPage) {\n      setCurrentPage(e.currentPage + 1); // Update state when page changes locally\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      alignItems: \"center\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"PDF Co-Viewer\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"number\",\n      value: currentPage,\n      onChange: handlePageChange,\n      min: \"1\",\n      placeholder: \"Go to page\",\n      style: {\n        marginBottom: \"10px\",\n        padding: \"8px\",\n        width: \"100px\",\n        textAlign: \"center\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: \"80%\",\n        height: \"80vh\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Worker, {\n        workerUrl: \"https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js\",\n        children: /*#__PURE__*/_jsxDEV(Viewer, {\n          fileUrl: pdfUrl,\n          plugins: [defaultLayout],\n          ref: viewerRef,\n          onDocumentLoad: handleDocumentLoad,\n          onPageChange: handlePageRendered\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 9\n  }, this);\n};\n_s(PdfViewer, \"Nf2toRxPrquZZyPVDnger87WqWk=\");\n_c = PdfViewer;\nexport default PdfViewer;\nvar _c;\n$RefreshReg$(_c, \"PdfViewer\");","map":{"version":3,"names":["React","useEffect","useState","useRef","Worker","Viewer","defaultLayoutPlugin","io","jsxDEV","_jsxDEV","socket","PdfViewer","pdfUrl","_s","currentPage","setCurrentPage","defaultLayout","viewerRef","on","newPage","off","handlePageChange","e","parseInt","target","value","emit","handleDocumentLoad","current","jumpToPage","handlePageRendered","style","display","flexDirection","alignItems","children","fileName","_jsxFileName","lineNumber","columnNumber","type","onChange","min","placeholder","marginBottom","padding","width","textAlign","height","workerUrl","fileUrl","plugins","ref","onDocumentLoad","onPageChange","_c","$RefreshReg$"],"sources":["/Users/aniruddhakulkarni/Desktop/Kalvium/pdf-co-viewer/src/components/PdfViewer.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport { Worker, Viewer } from \"@react-pdf-viewer/core\";\nimport { defaultLayoutPlugin } from \"@react-pdf-viewer/default-layout\";\nimport io from \"socket.io-client\";\nimport \"@react-pdf-viewer/core/lib/styles/index.css\";\nimport \"@react-pdf-viewer/default-layout/lib/styles/index.css\";\n\n// Connect to your backend URL\nconst socket = io(\"http://localhost:5001\");\n\nconst PdfViewer = ({ pdfUrl }) => {\n    const [currentPage, setCurrentPage] = useState(1);\n\n    // Initialize the defaultLayoutPlugin inside the component body\n    const defaultLayout = defaultLayoutPlugin();\n\n    // Ref for the Viewer instance\n    const viewerRef = useRef(null);\n\n    useEffect(() => {\n        // Listen for page-change events from the server\n        socket.on(\"page-change\", (newPage) => {\n            setCurrentPage(newPage); // Update current page based on server event\n        });\n\n        // Clean up the event listener\n        return () => {\n            socket.off(\"page-change\");\n        };\n    }, []);\n\n    const handlePageChange = (e) => {\n        const newPage = parseInt(e.target.value, 10);\n\n        if (newPage >= 1) {\n            setCurrentPage(newPage); // Update the local page\n            socket.emit(\"change-page\", newPage); // Emit the event to the server\n        }\n    };\n\n    const handleDocumentLoad = () => {\n        // Jump to the current page when the document loads\n        if (viewerRef.current && currentPage >= 1) {\n            viewerRef.current.jumpToPage(currentPage - 1); // Use zero-based indexing\n        }\n    };\n\n    const handlePageRendered = (e) => {\n        // Ensure the viewer shows the correct page\n        if (e.currentPage + 1 !== currentPage) {\n            setCurrentPage(e.currentPage + 1); // Update state when page changes locally\n        }\n    };\n\n    return (\n        <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"center\" }}>\n            <h2>PDF Co-Viewer</h2>\n            <input\n                type=\"number\"\n                value={currentPage}\n                onChange={handlePageChange}\n                min=\"1\"\n                placeholder=\"Go to page\"\n                style={{\n                    marginBottom: \"10px\",\n                    padding: \"8px\",\n                    width: \"100px\",\n                    textAlign: \"center\",\n                }}\n            />\n            <div style={{ width: \"80%\", height: \"80vh\" }}>\n                <Worker workerUrl=\"https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js\">\n                    <Viewer\n                        fileUrl={pdfUrl}\n                        plugins={[defaultLayout]}\n                        ref={viewerRef}\n                        onDocumentLoad={handleDocumentLoad}\n                        onPageChange={handlePageRendered}\n                    />\n                </Worker>\n            </div>\n        </div>\n    );\n};\n\nexport default PdfViewer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}